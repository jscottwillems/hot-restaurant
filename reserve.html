<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Reservation</title>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
        crossorigin="anonymous">

</head>

<body>

    <div class="jumbotron">
        <h1 class="display-4">
            <span class="glyphicon glyphicon-fire"></span>Hot Restaurant</h1>
        <hr class="my-4">
        <h2>Make your reservation</h2>
        <a class="btn btn-primary btn-lg" href="#" role="button">View Tables</a>
        <a class="btn btn-primary btn-lg" href="#" role="button">Home</a>
    </div>

    <div class="card" style="width: 50rem;">
        <div class="card-header">
            Table Reservation
        </div>
        <div class="card-body">
            <form>
                <div class="form-group">
                    <label for="guestName">
                        <b>Name</b>
                    </label>
                    <input type="text" class="form-control" id="guestName">
                </div>
                <div class="form-group">
                    <label for="guestPhone">
                        <b>Phone Number</b>
                    </label>
                    <input type="text" class="form-control" id="guestPhone">
                </div>
                <div class="form-group">
                    <label for="guestEmail">
                        <b>Email</b>
                    </label>
                    <input type="text" class="form-control" id="guestEmail">
                </div>
                <div class="form-group">
                    <label for="guestID">
                        <b>Unique ID</b>
                    </label>
                    <input type="text" class="form-control" id="guestID">
                </div>
                <button type="button" class="btn btn-primary" id="formSubmit">Submit</button>
            </form>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <p>
                <a href="/api/tables" target="#">API Table Link</a> |
                <a href="/api/waitlist" target="#">API Wait List</a> |
                <a href="https://github.com/jscottwillems/hot-restaurant" target="#">GitHub Repo</a>
            </p>
        </div>
    </footer>

</body>

<script type="text/javascript">
    // In this code below we create the Front-end JavaScript which "POSTS" our form data to our express server.
    // In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to our api
    // Our api recognizes the route (/api/tables)... and then runs the associated code (found in api-routes.js).
    // In this case the associated code "saves" the data to the table-data.js file or waitinglist-data.js file

    $(".submit").on("click", function (event) {
        event.preventDefault();

        var newReservation = {
            customerName: $("#guestName").val().trim(),
            phoneNumber: $("#guestPhone").val().trim(),
            customerEmail: $("#guestEmail").val().trim(),
            customerID: $("#guestID").val().trim()
        };

        console.log(newReservation);

        $.post("/api/tables", newReservation,
            function (data) {

                if (data) {
                    alert("Yay! You are officially booked!");
                } else {
                    alert("Sorry you are on the wait list");
                }

                $("#reserve-name").val("");
                $("#reserve-phone").val("");
                $("#reserve-email").val("");
                $("#reserve-unique-id").val("");

            });

    });
</script>

</html>